<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KUNEFecraft</title>
<meta name="keywords" content="kunefe, kunefecraft, craft, minecraft, eagler, eaglercraft, minecraft oyna, minecraft bedava, beleş minecraft, mc">
<link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">
<style>
  html, body {
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    font-family: 'Luckiest Guy', cursive;
    overflow: hidden;
    background: url('https://3dduvarkagitlari.com/Content/images/2023/7/26/l/3dduvarkagitlari-31da547a.jpg') no-repeat center center fixed;
    background-size: cover;
  }
  #start-screen {
    position: absolute;
    top:0; left:0; right:0; bottom:0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: white;
    text-shadow: 2px 2px 4px #000;
    z-index: 10;
  }
  #version-text {
    font-size: 1.5em;
    margin-bottom: 10px;
  }
  h1 {
    font-size: 4em;
    margin-bottom: 30px;
  }
  #play-button {
    font-size: 1.8em;
    padding: 12px 24px;
    border: none;
    border-radius: 8px;
    background: #ff9900;
    color: #000;
    cursor: pointer;
  }
  #music-control {
    position: fixed;
    bottom: 15px;
    right: 15px;
    background: rgba(255,153,0,0.85);
    padding: 8px 16px;
    border-radius: 20px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 0 10px rgba(255,153,0,0.7);
    z-index: 50;
  }
  canvas {
    position: absolute;
    top:0; left:0;
    width:100%; height:100%;
    pointer-events: none;
    z-index: 5;
  }
  iframe {
    width: 100%;
    height: 100%;
    border: none;
    display: none;
    position: relative;
    z-index: 1;
  }
</style>
</head>
<body>

<div id="start-screen">
  <p id="version-text">Version: Kunefe</p>
  <h1>KÜNEFECRAFT</h1>
  <button id="play-button">OYNA</button>
</div>

<canvas id="rain-canvas"></canvas>
<iframe id="game-frame" src="eaglercraft.html"></iframe>

<audio id="bg-music" src="assets/minecraft.mp3" loop></audio>
<div id="music-control">MÜZİK OYNAT</div>

<script>
const canvas = document.getElementById('rain-canvas');
const ctx = canvas.getContext('2d');
let width = window.innerWidth;
let height = window.innerHeight;
canvas.width = width;
canvas.height = height;
window.addEventListener('resize', () => {
  width = window.innerWidth;
  height = window.innerHeight;
  canvas.width = width;
  canvas.height = height;
});

// YAĞMUR DAMLALARI
class Raindrop {
  constructor() { this.reset(); }
  reset() {
    this.x = Math.random() * width;
    this.y = Math.random() * -height;
    this.speed = 3 + Math.random() * 3;
    this.length = 10 + Math.random() * 10;
    this.opacity = 0.5 + Math.random() * 0.5;
  }
  update() {
    this.y += this.speed;
    if (this.y > height) this.reset();
  }
  draw() {
    ctx.strokeStyle = `rgba(50,150,255,${this.opacity})`;
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(this.x, this.y);
    ctx.lineTo(this.x, this.y + this.length);
    ctx.stroke();
  }
}

// ATEŞ PARÇACIKLARI
class FireParticle {
  constructor(centerX, centerY) {
    this.centerX = centerX;
    this.centerY = centerY;
    this.angle = Math.random() * 2 * Math.PI;
    this.radius = Math.max(40, 50 + Math.random() * 10);
    this.size = 2 + Math.random() * 2;
    this.speed = 0.02 + Math.random() * 0.02;
    this.alpha = 1;
  }
  update() {
    this.angle += this.speed;
    this.alpha -= 0.01;
  }
  draw() {
    const x = this.centerX + Math.cos(this.angle) * this.radius;
    const y = this.centerY + Math.sin(this.angle) * this.radius;
    ctx.fillStyle = `rgba(255,100,0,${this.alpha})`;
    ctx.beginPath();
    ctx.arc(x, y, this.size, 0, Math.PI * 2);
    ctx.fill();
  }
}

let raindrops = Array.from({ length: 30 }, () => new Raindrop());
let fireParticles = [];
let animReq;

function animate() {
  ctx.clearRect(0, 0, width, height);

  // YAĞMUR
  raindrops.forEach(r => {
    r.update();
    r.draw();
  });

  // ATEŞ
  const btnRect = playBtn.getBoundingClientRect();
  const centerX = btnRect.left + btnRect.width / 2;
  const centerY = btnRect.top + btnRect.height / 2;

  for (let i = 0; i < 3; i++) {
    fireParticles.push(new FireParticle(centerX, centerY));
  }

  fireParticles.forEach((p, i) => {
    p.update();
    p.draw();
    if (p.alpha <= 0) fireParticles.splice(i, 1);
  });

  animReq = requestAnimationFrame(animate);
}
animate();

const playBtn = document.getElementById('play-button');
const startScreen = document.getElementById('start-screen');
const gameFrame = document.getElementById('game-frame');
const music = document.getElementById('bg-music');
const musicControl = document.getElementById('music-control');

playBtn.addEventListener('click', () => {
  startScreen.style.display = 'none';
  gameFrame.style.display = 'block';

  // Tüm animasyonu durdur
  cancelAnimationFrame(animReq);
  ctx.clearRect(0, 0, width, height);

  // Müzik durdur ve kontrol gizle
  if (!music.paused) {
    music.pause();
    musicControl.textContent = 'MÜZİK OYNAT';
  }
  musicControl.style.display = 'none';
});

musicControl.addEventListener('click', () => {
  if (music.paused) {
    music.play().then(() => {
      musicControl.textContent = 'MÜZİK DURDUR';
    }).catch(err => console.warn('Müzik başlatılamadı:', err));
  } else {
    music.pause();
    musicControl.textContent = 'MÜZİK OYNAT';
  }
});

music.addEventListener('ended', () => {
  musicControl.textContent = 'MÜZİK OYNAT';
});
</script>

</body>
</html>
